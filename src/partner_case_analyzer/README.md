# Case Analyzer MCP Server 

å·¥å•åˆ†æçš„MCPæœåŠ¡å™¨ï¼Œæ”¯æŒå¤šç»´åº¦å·¥å•ç»Ÿè®¡åˆ†æå’Œæ·±åº¦ä¸šåŠ¡æ´å¯Ÿã€‚ä¸“é—¨ç”¨äºåˆ†ææŠ€æœ¯æ”¯æŒå·¥å•çš„åˆ†å¸ƒæƒ…å†µã€æœåŠ¡ä½¿ç”¨æ¨¡å¼å’Œå®¢æˆ·æ”¯æŒéœ€æ±‚ã€‚

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

1. **Categoryåˆ†æ** - æŒ‰å·¥å•ç±»åˆ«ç»Ÿè®¡åˆ†å¸ƒæƒ…å†µ
2. **Payerè´¦æˆ·åˆ†æ** - åˆ†ææ¯ä¸ªä»˜è´¹è´¦æˆ·çš„å·¥å•æƒ…å†µå’ŒæŠ€æœ¯æ”¯æŒåˆ†å¸ƒ
3. **ServiceæœåŠ¡åˆ†æ** - ç»“åˆResolverå’ŒTypeåˆ†æå„æœåŠ¡çš„å·¥å•åˆ†å¸ƒ
4. **General Guidanceç»Ÿè®¡** - ä¸“é—¨ç»Ÿè®¡General Guidanceç±»å‹çš„å·¥å•
5. **ç»¼åˆåˆ†ææŠ¥å‘Š** - æä¾›å…¨ç»´åº¦çš„å·¥å•åˆ†ææ´å¯Ÿ

## ğŸ“ æ–‡ä»¶ç»“æ„

```
mcp-server-demo/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ partner_case_analyzer/
â”‚       â”œâ”€â”€ __init__.py                    # PythonåŒ…åˆå§‹åŒ–æ–‡ä»¶
â”‚       â”œâ”€â”€ server.py                      # æ ¸å¿ƒæœåŠ¡å™¨æ–‡ä»¶
â”‚       â””â”€â”€ README.md                      # æœ¬æ–‡æ¡£
â”œâ”€â”€ pyproject.toml                        # é¡¹ç›®é…ç½®
â”œâ”€â”€ requirements.txt                      # ä¾èµ–æ–‡ä»¶
â””â”€â”€ README.md                             # é¡¹ç›®ä¸»æ–‡æ¡£
```

## ğŸ› ï¸ å¯ç”¨å·¥å…·åˆ—è¡¨

**å·¥å•ç»Ÿè®¡åˆ†æå·¥å…·**
- `get_available_months_tool(data_dir)` - è·å–æ•°æ®ç›®å½•ä¸‹æ‰€æœ‰å¯ç”¨çš„æœˆä»½
- `analyze_cases_by_category(data_dir, month="")` - æŒ‰Category (C)åˆ—ç»Ÿè®¡å·¥å•æ•°é‡å’Œåˆ†å¸ƒ
- `analyze_cases_by_payer(data_dir, month="")` - æŒ‰Account PayerIdç»Ÿè®¡æ¯ä¸ªpayerçš„å·¥å•æ•°é‡å’ŒæŠ€æœ¯æ”¯æŒåˆ†å¸ƒ
- `analyze_cases_by_service(data_dir, month="")` - ç»“åˆResolverå’ŒType (T)åˆ—åˆ†æå„ä¸ªserviceçš„å·¥å•æ•°é‡
- `analyze_general_guidance_cases(data_dir, month="")` - ç»Ÿè®¡Item (I)ä¸ºGeneral Guidanceçš„å·¥å•æ•°é‡
- `get_comprehensive_case_analysis(data_dir, month="")` - è·å–ç»¼åˆå·¥å•åˆ†ææŠ¥å‘Š

**æœˆä»½å‚æ•°è¯´æ˜**
- `month` å‚æ•°æ”¯æŒä»¥ä¸‹æ ¼å¼ï¼š
  - `""` (ç©ºå­—ç¬¦ä¸²): åˆ†ææ‰€æœ‰æœˆä»½çš„å·¥å•
  - `"202507"`: åˆ†æ2025å¹´7æœˆçš„å·¥å•
  - `"2025-07"`: åˆ†æ2025å¹´7æœˆçš„å·¥å•ï¼ˆå¸¦è¿å­—ç¬¦æ ¼å¼ï¼‰

## æ•°æ®ç›®å½•ç»“æ„

```
/path/to/case-data/
â”œâ”€â”€ cases-202507.csv                      # 2025å¹´7æœˆå·¥å•æ•°æ®
â”œâ”€â”€ cases-202508.csv                      # 2025å¹´8æœˆå·¥å•æ•°æ®
â””â”€â”€ cases-202509.csv                      # 2025å¹´9æœˆå·¥å•æ•°æ®
```

## ä½¿ç”¨æ­¥éª¤

**Step 1. ç¯å¢ƒå‡†å¤‡**

```bash
# clone æœ¬é¡¹ç›®
git clone git@github.com:zhilidev/mcp-server-demo.git

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /path/to/mcp-server-demo

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

**Step 2. é…ç½®AIåŠ©æ‰‹ï¼Œå°†MCPé…ç½®æ·»åŠ åˆ°AIåŠ©æ‰‹é…ç½®æ–‡ä»¶ã€‚é‡å¯é…ç½®AIåŠ©æ‰‹ã€‚**

```json
{
  "mcpServers": {
    "demo-case-analyzer": {
      "command": "python3",
      "args": [
        "/path/to/mcp-server-demo/src/partner_case_analyzer/server.py"
      ],
      "env": {
        "CASE_DATA_DIR": "/path/to/case/data",
        "CUSTOMER_MAPPING_FILE": "/path/to/customer/mapping.xlsx" -- åŒ…å«payer, å®¢æˆ· ä¸¤åˆ—
      }
    }
  }
}
```

## ç¤ºä¾‹æç¤ºè¯

### ğŸ“Š åŸºç¡€å·¥å•åˆ†æ
```
- åˆ†æè¯¥ç›®å½•ä¸‹æ‰€æœ‰æœˆä»½çš„å·¥å•æŒ‰ç±»åˆ«åˆ†å¸ƒæƒ…å†µ
- åˆ†æ2025å¹´7æœˆçš„å·¥å•æŒ‰ç±»åˆ«åˆ†å¸ƒæƒ…å†µ
- ç»Ÿè®¡å„ä¸ªä»˜è´¹è´¦æˆ·å¼€å·¥å•çš„æ•°é‡å’ŒæŠ€æœ¯æ”¯æŒåˆ†å¸ƒ
- åˆ†æ2025å¹´7æœˆå„ä¸ªæœåŠ¡çš„å·¥å•æ•°é‡åˆ†å¸ƒ
- ç»Ÿè®¡2025å¹´7æœˆGeneral Guidanceç±»å‹çš„å·¥å•æœ‰å¤šå°‘ä¸ª
- ç”Ÿæˆ2025å¹´7æœˆçš„ç»¼åˆå·¥å•åˆ†ææŠ¥å‘Š
```

### ğŸ¯ æ·±åº¦ä¸šåŠ¡æ´å¯Ÿ
```
- å“ªä¸ªä»˜è´¹è´¦æˆ·åœ¨2025å¹´7æœˆå¼€çš„å·¥å•æœ€å¤šï¼Œä¸»è¦æ˜¯ä»€ä¹ˆç±»å‹çš„é—®é¢˜
- 2025å¹´7æœˆå“ªäº›æœåŠ¡çš„å·¥å•æ•°é‡æœ€å¤šï¼Œåæ˜ äº†ä»€ä¹ˆä¸šåŠ¡ç‰¹å¾
- 2025å¹´7æœˆTechnical Supportå’ŒéTechnical Supportçš„å·¥å•åˆ†å¸ƒå¦‚ä½•
- 2025å¹´7æœˆGeneral Guidanceå·¥å•ä¸»è¦é›†ä¸­åœ¨å“ªäº›æœåŠ¡ä¸Š
- ä»2025å¹´7æœˆçš„å·¥å•åˆ†å¸ƒçœ‹å®¢æˆ·çš„æŠ€æœ¯æˆç†Ÿåº¦å¦‚ä½•
```

### ğŸ“ˆ è¶‹åŠ¿å’Œæ¨¡å¼åˆ†æ
```
- æ¯”è¾ƒæ‰€æœ‰æœˆä»½å’Œ2025å¹´7æœˆçš„å·¥å•æ•°é‡å˜åŒ–
- åˆ†æ2025å¹´7æœˆå·¥å•ä¸¥é‡ç¨‹åº¦åˆ†å¸ƒï¼Œè¯†åˆ«å…³é”®é—®é¢˜
- ä»2025å¹´7æœˆå·¥å•çŠ¶æ€åˆ†å¸ƒçœ‹å¤„ç†æ•ˆç‡å¦‚ä½•
- è¯†åˆ«2025å¹´7æœˆé«˜é¢‘é—®é¢˜å’ŒæœåŠ¡ï¼Œåˆ¶å®šä¼˜åŒ–ç­–ç•¥
- åˆ†æ2025å¹´7æœˆå®¢æˆ·æ”¯æŒéœ€æ±‚æ¨¡å¼å’Œç‰¹å¾
```

## æ”¯æŒçš„æ–‡ä»¶æ ¼å¼

ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«ä»¥ä¸‹CSVæ–‡ä»¶æ ¼å¼ï¼š

**æ–‡ä»¶åæ ¼å¼æ”¯æŒ**
- `cases-YYYYMM.csv` - æ ‡å‡†æœˆåº¦å·¥å•æ–‡ä»¶
  - ç¤ºä¾‹: `cases-202507.csv` (2025å¹´7æœˆ)
  - ç¤ºä¾‹: `cases-202508.csv` (2025å¹´8æœˆ)

**å¿…éœ€çš„CSVåˆ—å­—æ®µ**
- `Case ID` - å·¥å•å”¯ä¸€æ ‡è¯†
- `Category (C)` - å·¥å•ç±»åˆ« (å¦‚: Technical support, Account and billing support)
- `Account PayerId` - ä»˜è´¹è´¦æˆ·ID
- `Type (T)` - å·¥å•ç±»å‹ (å¦‚: å…·ä½“çš„æœåŠ¡åç§°)
- `Item (I)` - å·¥å•é¡¹ç›® (å¦‚: General Guidance, Database Issueç­‰)
- `Resolver` - è§£å†³æœåŠ¡ (å¦‚: Simple Storage Service (S3), EC2ç­‰)
- `Subject` - å·¥å•ä¸»é¢˜
- `Status` - å·¥å•çŠ¶æ€ (å¦‚: Resolved, Pendingç­‰)
- `Severity` - ä¸¥é‡ç¨‹åº¦ (å¦‚: Normal, High, Lowç­‰)


**ğŸ‰ ç°åœ¨å°±å¼€å§‹ä½¿ç”¨å·¥å•åˆ†æåŠŸèƒ½ï¼Œè®©æ•°æ®ä¸ºä½ çš„å®¢æˆ·æ”¯æŒå†³ç­–æä¾›å¼ºæœ‰åŠ›çš„æ”¯æŒï¼**
